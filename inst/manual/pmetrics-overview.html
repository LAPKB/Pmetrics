<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Pmetrics Overview | Pmetrics User Manual</title>
  <meta name="description" content="This is the manual for the Pmetrics population modeling and simulation
package for R." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Pmetrics Overview | Pmetrics User Manual" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the manual for the Pmetrics population modeling and simulation
package for R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Pmetrics Overview | Pmetrics User Manual" />
  
  <meta name="twitter:description" content="This is the manual for the Pmetrics population modeling and simulation
package for R." />
  

<meta name="author" content="LAPKB" />


<meta name="date" content="2022-09-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="general-workflow.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#a-brief-history"><i class="fa fa-check"></i><b>1.1</b> A brief history</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#people"><i class="fa fa-check"></i><b>1.2</b> People</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#citing-pmetrics"><i class="fa fa-check"></i><b>1.3</b> Citing Pmetrics</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#donate"><i class="fa fa-check"></i><b>1.4</b> Donate</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#r6-architecture"><i class="fa fa-check"></i><b>2.1</b> R6 architecture</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#disclaimer"><i class="fa fa-check"></i><b>2.2</b> Disclaimer</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#system-requirements-and-installation"><i class="fa fa-check"></i><b>2.3</b> System Requirements and Installation</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#what-this-manual-is-not"><i class="fa fa-check"></i><b>2.4</b> What This Manual Is Not</a></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#getting-help-and-updates"><i class="fa fa-check"></i><b>2.5</b> Getting Help and Updates</a></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#customizing-pmetrics-options"><i class="fa fa-check"></i><b>2.6</b> Customizing Pmetrics Options</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html"><i class="fa fa-check"></i><b>3</b> Pmetrics Overview</a><ul>
<li class="chapter" data-level="3.1" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#software-engines"><i class="fa fa-check"></i><b>3.1</b> Software engines</a></li>
<li class="chapter" data-level="3.2" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#pmetrics-control-functions"><i class="fa fa-check"></i><b>3.2</b> Pmetrics control functions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#run-functions"><i class="fa fa-check"></i><b>3.2.1</b> Run functions</a></li>
<li class="chapter" data-level="3.2.2" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#parse-functions"><i class="fa fa-check"></i><b>3.2.2</b> Parse functions</a></li>
<li class="chapter" data-level="3.2.3" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#saving-functions"><i class="fa fa-check"></i><b>3.2.3</b> Saving functions</a></li>
<li class="chapter" data-level="3.2.4" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#loading-functions"><i class="fa fa-check"></i><b>3.2.4</b> Loading functions</a></li>
<li class="chapter" data-level="3.2.5" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#report-generation"><i class="fa fa-check"></i><b>3.2.5</b> Report generation</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#other-functions"><i class="fa fa-check"></i><b>3.3</b> Other functions</a><ul>
<li class="chapter" data-level="3.3.1" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#data-manipulation"><i class="fa fa-check"></i><b>3.3.1</b> Data manipulation</a></li>
<li class="chapter" data-level="3.3.2" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#model-selection-and-diagnostics"><i class="fa fa-check"></i><b>3.3.2</b> Model selection and diagnostics</a></li>
<li class="chapter" data-level="3.3.3" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#other-functions-1"><i class="fa fa-check"></i><b>3.3.3</b> Other functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="general-workflow.html"><a href="general-workflow.html"><i class="fa fa-check"></i><b>4</b> General Workflow</a></li>
<li class="chapter" data-level="5" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html"><i class="fa fa-check"></i><b>5</b> Pmetrics Input Files</a><ul>
<li class="chapter" data-level="5.1" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#data.csv-files"><i class="fa fa-check"></i><b>5.1</b> Data.csv Files</a><ul>
<li class="chapter" data-level="5.1.1" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#data-file-format"><i class="fa fa-check"></i><b>5.1.1</b> Data file format</a></li>
<li class="chapter" data-level="5.1.2" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#manipulation-of-csv-files"><i class="fa fa-check"></i><b>5.1.2</b> Manipulation of CSV files</a></li>
<li class="chapter" data-level="5.1.3" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#specifying-data-objects-in-r6"><i class="fa fa-check"></i><b>5.1.3</b> Specifying Data Objects in R6</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#specifying-models-in-r6"><i class="fa fa-check"></i><b>5.2</b> Specifying Models in R6</a><ul>
<li class="chapter" data-level="5.2.1" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#priR6"><i class="fa fa-check"></i><b>5.2.1</b> PRImary variables</a></li>
<li class="chapter" data-level="5.2.2" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#covR6"><i class="fa fa-check"></i><b>5.2.2</b> COVariates</a></li>
<li class="chapter" data-level="5.2.3" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#secR6"><i class="fa fa-check"></i><b>5.2.3</b> SECondary variables</a></li>
<li class="chapter" data-level="5.2.4" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#bolR6"><i class="fa fa-check"></i><b>5.2.4</b> BOLus inputs</a></li>
<li class="chapter" data-level="5.2.5" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#iniR6"><i class="fa fa-check"></i><b>5.2.5</b> INItial conditions</a></li>
<li class="chapter" data-level="5.2.6" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#FaR6"><i class="fa fa-check"></i><b>5.2.6</b> FA (bioavailability)</a></li>
<li class="chapter" data-level="5.2.7" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#lagR6"><i class="fa fa-check"></i><b>5.2.7</b> LAG time</a></li>
<li class="chapter" data-level="5.2.8" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#outR6"><i class="fa fa-check"></i><b>5.2.8</b> OUTputs</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#specifying-models-in-legacy"><i class="fa fa-check"></i><b>5.3</b> Specifying Models in Legacy</a><ul>
<li class="chapter" data-level="5.3.1" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#pri"><i class="fa fa-check"></i><b>5.3.1</b> Primary variables</a></li>
<li class="chapter" data-level="5.3.2" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#cov"><i class="fa fa-check"></i><b>5.3.2</b> Covariates</a></li>
<li class="chapter" data-level="5.3.3" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#sec"><i class="fa fa-check"></i><b>5.3.3</b> Secondary variables</a></li>
<li class="chapter" data-level="5.3.4" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#bol"><i class="fa fa-check"></i><b>5.3.4</b> Bolus inputs</a></li>
<li class="chapter" data-level="5.3.5" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#ini"><i class="fa fa-check"></i><b>5.3.5</b> Initial conditions</a></li>
<li class="chapter" data-level="5.3.6" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#Fa"><i class="fa fa-check"></i><b>5.3.6</b> Fa (bioavailability)</a></li>
<li class="chapter" data-level="5.3.7" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#lag"><i class="fa fa-check"></i><b>5.3.7</b> Lag time</a></li>
<li class="chapter" data-level="5.3.8" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#dif"><i class="fa fa-check"></i><b>5.3.8</b> Differential equations</a></li>
<li class="chapter" data-level="5.3.9" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#out"><i class="fa fa-check"></i><b>5.3.9</b> Outputs</a></li>
<li class="chapter" data-level="5.3.10" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#err"><i class="fa fa-check"></i><b>5.3.10</b> Error</a></li>
<li class="chapter" data-level="5.3.11" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#extra"><i class="fa fa-check"></i><b>5.3.11</b> Extra</a></li>
<li class="chapter" data-level="5.3.12" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#reserved"><i class="fa fa-check"></i><b>5.3.12</b> Reserved Names</a></li>
<li class="chapter" data-level="5.3.13" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#completeEx"><i class="fa fa-check"></i><b>5.3.13</b> Complete Example</a></li>
<li class="chapter" data-level="5.3.14" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#brief-fortran-tutorial"><i class="fa fa-check"></i><b>5.3.14</b> Brief Fortran Tutorial</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#using-legacy-models-in-r6"><i class="fa fa-check"></i><b>5.4</b> Using legacy models in R6</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html"><i class="fa fa-check"></i><b>6</b> How to use R and Pmetrics</a><ul>
<li class="chapter" data-level="6.1" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html#setting-up-a-pmetrics-project"><i class="fa fa-check"></i><b>6.1</b> Setting up a Pmetrics project</a></li>
<li class="chapter" data-level="6.2" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html#getting-the-required-inputs-to-run-pmetrics"><i class="fa fa-check"></i><b>6.2</b> Getting the required inputs to run Pmetrics</a></li>
<li class="chapter" data-level="6.3" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html#fitting-models-to-data"><i class="fa fa-check"></i><b>6.3</b> Fitting models to data</a></li>
<li class="chapter" data-level="6.4" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html#loading-results-after-a-completed-run"><i class="fa fa-check"></i><b>6.4</b> Loading results after a completed run</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="pmetrics-data-objects.html"><a href="pmetrics-data-objects.html"><i class="fa fa-check"></i><b>7</b> Pmetrics Data Objects</a></li>
<li class="chapter" data-level="8" data-path="performing-simulations.html"><a href="performing-simulations.html"><i class="fa fa-check"></i><b>8</b> Performing Simulations</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Pmetrics User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pmetrics-overview" class="section level1 hasAnchor">
<h1><span class="header-section-number">Chapter 3</span> Pmetrics Overview<a href="pmetrics-overview.html#pmetrics-overview" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="software-engines" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.1</span> Software engines<a href="pmetrics-overview.html#software-engines" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are three main software engines that Pmetrics controls.</p>
<ul>
<li><p><strong>IT2B</strong> is the ITerative 2-stage Bayesian parametric population PK modeling
program. It is generally used to estimate parameter ranges to pass to
NPAG. It will estimate values for population model parameters under the
assumption that the underlying distributions of those values are normal
or transformed to normal.</p></li>
<li><p><strong>NPAG</strong> is the Non-parametric Adaptive Grid software. It will create a
non-parametric population model consisting of discrete support points,
each with a set of estimates for all parameters in the model plus an
associated probability (weight) of that set of estimates. There can be
at most one point for each subject in the study population. There is no
need for any assumption about the underlying distribution of model
parameter values.</p></li>
<li><p>The <strong>Simulator</strong> is a semi-parametric Monte Carlo simulation software
program that can use the output of IT2B or NPAG to build randomly
generated response profiles (e.g. time-concentration curves) for a given
population model, parameter estimates, and data input. Simulation from a
non-parametric joint density model, i.e. NPAG output, is possible, with
each point serving as the mean of a multivariate normal distribution,
weighted according to the weight of the point. The covariance matrix of
the entire set of support points is divided equally among the points for
the purposes of simulation.</p></li>
</ul>
</div>
<div id="pmetrics-control-functions" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.2</span> Pmetrics control functions<a href="pmetrics-overview.html#pmetrics-control-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><span class="r6">R6</span></p>
<p>Pmetrics uses<code>PM_data</code> to create data objects, <code>PM_model</code> to create model
objects, and <code>PM_fit</code> to create
objects that combine the model with the data, ready to be run (fitted),
generating probability distributions for primary model parameters.
These are extensively
documented within R by using the <code>help(command)</code> or <code>?command syntax</code>.</p>
<p>These functions replace the following Legacy functions: <code>ITrun</code>, <code>ERRrun</code>,
<code>NPrun</code>.</p>
<p>Invoking the simulator in R6 becomes a method attached to <code>PM_result</code> objects.</p>
<p><span class="legacy">Legacy</span></p>
<p>Pmetrics has groups of R functions named logically to run each of these
programs and to extract the output. Again, these are extensively
documented within R by using the <code>help(command)</code> or <code>?command syntax</code>.</p>
<ul>
<li><p><code>ITrun</code>, <code>ITparse</code>, <code>ERRrun</code></p></li>
<li><p><code>NPrun</code>, <code>NPparse</code></p></li>
<li><p><code>PMload</code>, <code>PMsave</code>, <code>PMreport</code></p></li>
<li><p><code>SIMrun</code>, <code>SIMparse</code></p></li>
</ul>
<div id="run-functions" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.1</span> Run functions<a href="pmetrics-overview.html#run-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="r6">R6</span></p>
<p>Once a <code>PM_fit</code> object is created, which combines a model with a data file,
it can be run by using the syntax <code>$run()</code> to access the appropriate function
defined for the <code>PM_fit</code> object.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">fit1 &lt;-<span class="st"> </span>PM_fit<span class="op">$</span><span class="kw">new</span>(model, data)</a>
<a class="sourceLine" id="cb3-2" title="2">fit1<span class="op">$</span><span class="kw">run</span>(options)</a></code></pre></div>
<p><span class="r6">R6</span> <span class="legacy">Legacy</span></p>
<p>For IT2B and NPAG, the “run” functions generate batch files, which when
executed, launch the software programs to do the analysis. <code>$run(engine="err")</code>
or <code>ERRrun()</code> is a special implementation of IT2B designed to estimate
the assay error polynomial coefficients from the data, when they cannot be calculated from assay validation data (using <code>makeErrorPoly()</code>) supplied by the
analytical laboratory. The batch files contain all the information
necessary to complete a run, tidy the output into a date/time stamped
directory with meaningful subdirectories, extract the information,
generate a report, and a saved Rdata file of parsed output which can be
quickly and easily loaded into R. On Mac (Unix) and Linux systems,
the batch file automatically launches in a Terminal window.
Prior to v1.9, on Windows systems, the batch file was launched manually,
but as of v1.9, this manual step is no longer necessary. The execution of
the program to do the actual model parameter estimation is independent
of R, so that the user is free to use R for other purposes.</p>
<p><span class="r6">R6</span></p>
<p>For the Simulator, the <code>$sim</code> method for a <code>PM_result</code> object will execute the
program directly within R and return a <code>PM_sim</code> object.
An equivalent method is to construct a new <code>PM_sim</code> directly.</p>
<p>s</p>
<p><span class="legacy">Legacy</span></p>
<p>To run the simulator in legacy mode, use <code>SIMrun</code>. Results are saved to the
hard drive in the working directory, and can be read with <code>SIMparse</code> as
described below.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">SIMrun</span>(...)</a></code></pre></div>
</div>
<div id="parse-functions" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.2</span> Parse functions<a href="pmetrics-overview.html#parse-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="r6">R6</span> <span class="legacy">Legacy</span></p>
<p>For all programs, the “parse” functions will extract the primary output
from the program into meaningful R data objects. For IT2B and NPAG in either R6
or legacy modes, this
is done automatically at the end of a successful run, and the objects
are saved in the output subdirectory as IT2Bout.Rdata or NPAGout.Rdata,
respectively. The parse functions run automatically and are not
generally necessary for the user to access.</p>
<p><span class="r6">R6</span></p>
<p>For the simulator the results are returned automatically to the object assigned
to contain the output of the simulator, e.g. <code>sim1</code> below.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">sim1 &lt;-<span class="st"> </span>PM_result<span class="op">$</span><span class="kw">sim</span>(...)</a></code></pre></div>
<p>There is no longer any
need to use the <code>SIMparse</code> legacy function described below, because the
<code>SIMrun</code> and <code>SIMparse</code> legacy functions are combined within the <code>$sim()</code> method
for <code>PM_result</code> objects or the <code>$new()</code> method for <code>PM_sim</code> objects.</p>
<p><span class="legacy">Legacy</span></p>
<p>After running the simulator with <code>SIMrun</code>, the results are saved to files
in the working
directory. They can be retrieved using <code>SIMparse</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">simdata &lt;-<span class="st"> </span><span class="kw">SIMparse</span>(<span class="st">&quot;simout1.txt&quot;</span>)</a></code></pre></div>
</div>
<div id="saving-functions" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.3</span> Saving functions<a href="pmetrics-overview.html#saving-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="r6">R6</span></p>
<p>The Pmetrics R6 objects <code>PM_fit</code>, <code>PM_result</code>, <code>PM_sim</code>, <code>PM_valid</code>, and
<code>PM_pta</code> all have a <code>$save()</code> method. This method saves the object to the hard drive
in the current working directory by default. The format is .rds which is a
binary format used by R to save individual objects. The purpose of the <code>$save()</code>
method is to enable retrieval of the object at a later time.</p>
<p><span class="legacy">Legacy</span></p>
<p>Objects created that are attached to a particular run can be identified by using
the same suffix number as the run. <code>PMsave</code> can add these attached objects to
the .Rdata file for that run, which is loaded with <code>PMload</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">sim<span class="fl">.2</span> &lt;-<span class="st"> </span><span class="kw">SIMparse</span>(<span class="st">&quot;simout1.txt&quot;</span>)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">PMsave</span>(<span class="dv">2</span>)</a></code></pre></div>
<p>In the above example, <code>sim.2</code> will be added to the .Rdata file for future
retrieval with <code>PMload(2)</code>.</p>
</div>
<div id="loading-functions" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.4</span> Loading functions<a href="pmetrics-overview.html#loading-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="r6">R6</span></p>
<p>After a successful IT2B or NPAG run, <code>PM_load</code> creates a
<code>PM_result</code> object rather than loading run results into the current
environment and suffixed with the run number as for legacy mode.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">res1 &lt;-<span class="st"> </span><span class="kw">PM_load</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb8-2" title="2">res1<span class="op">$</span>op<span class="op">$</span><span class="kw">plot</span>()</a></code></pre></div>
<p><code>PM_result</code>, <code>PM_fit</code>, <code>PM_sim</code>, <code>PM_valid</code>, and
<code>PM_pta</code> all have a <code>$load()</code> method that takes as its only argument the
full or relative path (if not
in the working directory) and name of an .rds file created by the corresponding
<code>$save()</code> method.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">sim1 &lt;-<span class="st"> </span>PM_sim<span class="op">$</span><span class="kw">load</span>(<span class="st">&quot;sim.rds&quot;</span>)</a></code></pre></div>
<p><span class="legacy">Legacy</span></p>
<p>For IT2B and NPAG, the <code>PMload</code> function can be used to load the .Rdata file
after a successful run. Objects will be loaded
into the current environment in R and suffixed with “.run”, where “run” is
the run number.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">PMload</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">plot</span>(op<span class="fl">.1</span>)</a></code></pre></div>
<p>For simulations, <code>SIMparse</code>, described above, combines the parsing and loading
functions.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">sim<span class="fl">.2</span> &lt;-<span class="st"> </span><span class="kw">SIMparse</span>(<span class="st">&quot;simout1.txt&quot;</span>)</a></code></pre></div>
</div>
<div id="report-generation" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.5</span> Report generation<a href="pmetrics-overview.html#report-generation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="r6">R6</span> <span class="legacy">Legacy</span></p>
<p>The <code>PMreport</code> function is automatically run at the end of a successful
NPAG and IT2B run, and it will generate an HTML page with summaries of
the run, as well as the .Rdata files and other objects. The default
browser will be automatically launched for viewing of the HTML report
page. <!--It will also generate a .tex file suitable for processing by a
LATEX engine to generate a pdf report.--> See the <a href="#outputs">Pmetrics
Outputs</a> section.</p>
</div>
</div>
<div id="other-functions" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.3</span> Other functions<a href="pmetrics-overview.html#other-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><span class="r6">R6</span> <span class="legacy">Legacy</span></p>
<p>Within Pmetrics there are also functions to manipulate data .csv files
and process and plot extracted data.</p>
<div id="data-manipulation" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.3.1</span> Data manipulation<a href="pmetrics-overview.html#data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<colgroup>
<col width="46%" />
<col width="32%" />
<col width="21%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">R6</th>
<th align="left">Legacy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Read data file</td>
<td align="left">PM_data$new()</td>
<td align="left">PMreadMatrix()</td>
</tr>
<tr class="even">
<td align="left">Check data file</td>
<td align="left">Embedded in PM_data$new()</td>
<td align="left">PMcheck()</td>
</tr>
<tr class="odd">
<td align="left">Write data file</td>
<td align="left">PM_data$write()</td>
<td align="left">PMwriteMatrix()</td>
</tr>
<tr class="even">
<td align="left">Convert calendar dates and clock times</td>
<td align="left">Embedded in PM_data$new()</td>
<td align="left">PMmatrixReltime()</td>
</tr>
<tr class="odd">
<td align="left">Convert from old USC*PACK .wrk format</td>
<td align="left">PMwrk2csv()</td>
<td align="left">PMwrk2csv()</td>
</tr>
<tr class="even">
<td align="left">Convert from NONMEM</td>
<td align="left">NM2PM()</td>
<td align="left">NM2PM()</td>
</tr>
<tr class="odd">
<td align="left">Convert from old USC*PACK .mb format</td>
<td align="left">PMmb2csv()</td>
<td align="left">PMmb2csv()</td>
</tr>
</tbody>
</table>
</div>
<div id="model-selection-and-diagnostics" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.3.2</span> Model selection and diagnostics<a href="pmetrics-overview.html#model-selection-and-diagnostics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<colgroup>
<col width="34%" />
<col width="43%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">R6</th>
<th align="left">Legacy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Compare models</td>
<td align="left">PM_compare(PM_result1, PMresult2,…)</td>
<td align="left">PMcompare(1, 2, …)</td>
</tr>
<tr class="even">
<td align="left">Plot residuals</td>
<td align="left">PM_result<span class="math inline">\(op\)</span>plot(resid = T,…)</td>
<td align="left">plot(op, resid = T)</td>
</tr>
<tr class="odd">
<td align="left">Construct VPC, pcVPC, NPDE</td>
<td align="left">PM_result$valid() or PM_valid$new()</td>
<td align="left">makeValid()</td>
</tr>
<tr class="even">
<td align="left">Plot VPC, pcVPC, NPDE</td>
<td align="left">PM_valid<span class="math inline">\(plot() |plot(PMvalid) | |Stepwise covariate regression |PM_result\)</span>step()</td>
<td align="left">PMstep()</td>
</tr>
</tbody>
</table>
</div>
<div id="other-functions-1" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.3.3</span> Other functions<a href="pmetrics-overview.html#other-functions-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>## Warning in read.table(file = file, header = header, sep = sep, quote = quote, :
## incomplete final line found by readTableHeader on &#39;Data/RLcomp_other.csv&#39;</code></pre>
<table style="width:100%;">
<colgroup>
<col width="33%" />
<col width="56%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">R6</th>
<th align="left">Legacy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Calculate AUC</td>
<td align="left">$auc() method for PM_result$op/$post/$pop, or PM_sim</td>
<td align="left">makeAUC()</td>
</tr>
<tr class="even">
<td align="left">Simulate</td>
<td align="left">PM_result$sim() or PM_sim$new()</td>
<td align="left">SIMrun()</td>
</tr>
<tr class="odd">
<td align="left">Probability of target attainment</td>
<td align="left">PM_sim$pta() or PM_pta$new()</td>
<td align="left">makePTA()</td>
</tr>
</tbody>
</table>
<!-- * Process data: `makeAUC`, `makeCov`, `makeCycle`, `makeFinal`, `makeOP`, `makePTA`, -->
<!-- `makeErrorPoly` -->
<!-- * Plot data: `plot.PMcov`, `plot.PMcycle`, `plot.PMfinal`, `plot.PMmatrix`, -->
<!-- `plot.PMop`,`plot.PMsim`, `plot.PMvalid`, `plot.PMpta` -->
<!-- * Pmetrics function defaults: `setPMoptions`, `getPMoptions` -->
<p>Again, all functions have extensive help files and examples which can be
examined in R by using the <code>help(command)</code> or <code>?command</code> syntax.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="general-workflow.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-Overview.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
