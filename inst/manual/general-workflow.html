<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 General Workflow | Pmetrics User Manual</title>
  <meta name="description" content="This is the manual for the Pmetrics population modeling and simulation
package for R." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 General Workflow | Pmetrics User Manual" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the manual for the Pmetrics population modeling and simulation
package for R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 General Workflow | Pmetrics User Manual" />
  
  <meta name="twitter:description" content="This is the manual for the Pmetrics population modeling and simulation
package for R." />
  

<meta name="author" content="LAPKB" />


<meta name="date" content="2022-09-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pmetrics-overview.html"/>
<link rel="next" href="pmetrics-input-files.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#a-brief-history"><i class="fa fa-check"></i><b>1.1</b> A brief history</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#people"><i class="fa fa-check"></i><b>1.2</b> People</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#citing-pmetrics"><i class="fa fa-check"></i><b>1.3</b> Citing Pmetrics</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#donate"><i class="fa fa-check"></i><b>1.4</b> Donate</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#r6-architecture"><i class="fa fa-check"></i><b>2.1</b> R6 architecture</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#disclaimer"><i class="fa fa-check"></i><b>2.2</b> Disclaimer</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#system-requirements-and-installation"><i class="fa fa-check"></i><b>2.3</b> System Requirements and Installation</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#what-this-manual-is-not"><i class="fa fa-check"></i><b>2.4</b> What This Manual Is Not</a></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#getting-help-and-updates"><i class="fa fa-check"></i><b>2.5</b> Getting Help and Updates</a></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#customizing-pmetrics-options"><i class="fa fa-check"></i><b>2.6</b> Customizing Pmetrics Options</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html"><i class="fa fa-check"></i><b>3</b> Pmetrics Overview</a><ul>
<li class="chapter" data-level="3.1" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#software-engines"><i class="fa fa-check"></i><b>3.1</b> Software engines</a></li>
<li class="chapter" data-level="3.2" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#pmetrics-control-functions"><i class="fa fa-check"></i><b>3.2</b> Pmetrics control functions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#run-functions"><i class="fa fa-check"></i><b>3.2.1</b> Run functions</a></li>
<li class="chapter" data-level="3.2.2" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#parse-functions"><i class="fa fa-check"></i><b>3.2.2</b> Parse functions</a></li>
<li class="chapter" data-level="3.2.3" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#saving-functions"><i class="fa fa-check"></i><b>3.2.3</b> Saving functions</a></li>
<li class="chapter" data-level="3.2.4" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#loading-functions"><i class="fa fa-check"></i><b>3.2.4</b> Loading functions</a></li>
<li class="chapter" data-level="3.2.5" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#report-generation"><i class="fa fa-check"></i><b>3.2.5</b> Report generation</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#other-functions"><i class="fa fa-check"></i><b>3.3</b> Other functions</a><ul>
<li class="chapter" data-level="3.3.1" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#data-manipulation"><i class="fa fa-check"></i><b>3.3.1</b> Data manipulation</a></li>
<li class="chapter" data-level="3.3.2" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#model-selection-and-diagnostics"><i class="fa fa-check"></i><b>3.3.2</b> Model selection and diagnostics</a></li>
<li class="chapter" data-level="3.3.3" data-path="pmetrics-overview.html"><a href="pmetrics-overview.html#other-functions-1"><i class="fa fa-check"></i><b>3.3.3</b> Other functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="general-workflow.html"><a href="general-workflow.html"><i class="fa fa-check"></i><b>4</b> General Workflow</a></li>
<li class="chapter" data-level="5" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html"><i class="fa fa-check"></i><b>5</b> Pmetrics Input Files</a><ul>
<li class="chapter" data-level="5.1" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#data.csv-files"><i class="fa fa-check"></i><b>5.1</b> Data.csv Files</a><ul>
<li class="chapter" data-level="5.1.1" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#data-file-format"><i class="fa fa-check"></i><b>5.1.1</b> Data file format</a></li>
<li class="chapter" data-level="5.1.2" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#manipulation-of-csv-files"><i class="fa fa-check"></i><b>5.1.2</b> Manipulation of CSV files</a></li>
<li class="chapter" data-level="5.1.3" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#specifying-data-objects-in-r6"><i class="fa fa-check"></i><b>5.1.3</b> Specifying Data Objects in R6</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#specifying-models-in-r6"><i class="fa fa-check"></i><b>5.2</b> Specifying Models in R6</a><ul>
<li class="chapter" data-level="5.2.1" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#priR6"><i class="fa fa-check"></i><b>5.2.1</b> PRImary variables</a></li>
<li class="chapter" data-level="5.2.2" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#covR6"><i class="fa fa-check"></i><b>5.2.2</b> COVariates</a></li>
<li class="chapter" data-level="5.2.3" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#secR6"><i class="fa fa-check"></i><b>5.2.3</b> SECondary variables</a></li>
<li class="chapter" data-level="5.2.4" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#bolR6"><i class="fa fa-check"></i><b>5.2.4</b> BOLus inputs</a></li>
<li class="chapter" data-level="5.2.5" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#iniR6"><i class="fa fa-check"></i><b>5.2.5</b> INItial conditions</a></li>
<li class="chapter" data-level="5.2.6" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#FaR6"><i class="fa fa-check"></i><b>5.2.6</b> FA (bioavailability)</a></li>
<li class="chapter" data-level="5.2.7" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#lagR6"><i class="fa fa-check"></i><b>5.2.7</b> LAG time</a></li>
<li class="chapter" data-level="5.2.8" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#outR6"><i class="fa fa-check"></i><b>5.2.8</b> OUTputs</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#specifying-models-in-legacy"><i class="fa fa-check"></i><b>5.3</b> Specifying Models in Legacy</a><ul>
<li class="chapter" data-level="5.3.1" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#pri"><i class="fa fa-check"></i><b>5.3.1</b> Primary variables</a></li>
<li class="chapter" data-level="5.3.2" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#cov"><i class="fa fa-check"></i><b>5.3.2</b> Covariates</a></li>
<li class="chapter" data-level="5.3.3" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#sec"><i class="fa fa-check"></i><b>5.3.3</b> Secondary variables</a></li>
<li class="chapter" data-level="5.3.4" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#bol"><i class="fa fa-check"></i><b>5.3.4</b> Bolus inputs</a></li>
<li class="chapter" data-level="5.3.5" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#ini"><i class="fa fa-check"></i><b>5.3.5</b> Initial conditions</a></li>
<li class="chapter" data-level="5.3.6" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#Fa"><i class="fa fa-check"></i><b>5.3.6</b> Fa (bioavailability)</a></li>
<li class="chapter" data-level="5.3.7" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#lag"><i class="fa fa-check"></i><b>5.3.7</b> Lag time</a></li>
<li class="chapter" data-level="5.3.8" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#dif"><i class="fa fa-check"></i><b>5.3.8</b> Differential equations</a></li>
<li class="chapter" data-level="5.3.9" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#out"><i class="fa fa-check"></i><b>5.3.9</b> Outputs</a></li>
<li class="chapter" data-level="5.3.10" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#err"><i class="fa fa-check"></i><b>5.3.10</b> Error</a></li>
<li class="chapter" data-level="5.3.11" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#extra"><i class="fa fa-check"></i><b>5.3.11</b> Extra</a></li>
<li class="chapter" data-level="5.3.12" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#reserved"><i class="fa fa-check"></i><b>5.3.12</b> Reserved Names</a></li>
<li class="chapter" data-level="5.3.13" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#completeEx"><i class="fa fa-check"></i><b>5.3.13</b> Complete Example</a></li>
<li class="chapter" data-level="5.3.14" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#brief-fortran-tutorial"><i class="fa fa-check"></i><b>5.3.14</b> Brief Fortran Tutorial</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="pmetrics-input-files.html"><a href="pmetrics-input-files.html#using-legacy-models-in-r6"><i class="fa fa-check"></i><b>5.4</b> Using legacy models in R6</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html"><i class="fa fa-check"></i><b>6</b> How to use R and Pmetrics</a><ul>
<li class="chapter" data-level="6.1" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html#setting-up-a-pmetrics-project"><i class="fa fa-check"></i><b>6.1</b> Setting up a Pmetrics project</a></li>
<li class="chapter" data-level="6.2" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html#getting-the-required-inputs-to-run-pmetrics"><i class="fa fa-check"></i><b>6.2</b> Getting the required inputs to run Pmetrics</a></li>
<li class="chapter" data-level="6.3" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html#fitting-models-to-data"><i class="fa fa-check"></i><b>6.3</b> Fitting models to data</a></li>
<li class="chapter" data-level="6.4" data-path="how-to-use-r-and-pmetrics.html"><a href="how-to-use-r-and-pmetrics.html#loading-results-after-a-completed-run"><i class="fa fa-check"></i><b>6.4</b> Loading results after a completed run</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="pmetrics-data-objects.html"><a href="pmetrics-data-objects.html"><i class="fa fa-check"></i><b>7</b> Pmetrics Data Objects</a></li>
<li class="chapter" data-level="8" data-path="performing-simulations.html"><a href="performing-simulations.html"><i class="fa fa-check"></i><b>8</b> Performing Simulations</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Pmetrics User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="general-workflow" class="section level1 hasAnchor">
<h1><span class="header-section-number">Chapter 4</span> General Workflow<a href="general-workflow.html#general-workflow" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><span class="r6">R6</span></p>
<p>The general Pmetrics workflow in R6 for IT2B and NPAG is shown in the
following diagram.</p>
<p><img src="Images/Slide1.png" /></p>
<p>The user creates the data and model objects at the top. These can come from the hard drive or from within R (dashed arrows). The model file is created in R using
the <code>PM_model$new()</code> function and the data file by <code>PM_data$new()</code>. When combined using <code>PM_fit$new()</code> and the <code>$run()</code> function
on the resulting object, the analysis is executed. At the end of the run, the hard drive will contain a new numerically named folder, e.g., 1, 2, 3, …, that contains the files which can be loaded into R subsequently using
<code>PM_load(x)</code>, replacing <code>x</code> with the folder number. <code>PM_load()</code> is an alias for <code>PM_result$new()</code> because it creates a new <code>PM_result</code> object which contains all the results of a run, and has many assciated methods attached to it for plotting, simulating, etc.</p>
<p>To change model parameters, the model object is updated via <code>PM_model$update()</code>, <code>PM_fit$new()</code> is called and then the run is executed with <code>$run()</code>. If continuing a previous run that did not end, simply use the <code>$run()</code> and specify the run number you wish to continue as the <code>prior</code> argument to <code>$run()</code>. These scenarios are illustrated below.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co">#Run 1 - ensure the data, model files are in the working directory</span></a>
<a class="sourceLine" id="cb13-2" title="2">data1 &lt;-<span class="st"> </span>PM_data<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;data.csv&quot;</span>)</a>
<a class="sourceLine" id="cb13-3" title="3">mod1 &lt;-<span class="st"> </span>PM_model<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;model.txt&quot;</span>)</a>
<a class="sourceLine" id="cb13-4" title="4">fit1 &lt;-<span class="st"> </span>PM_fit<span class="op">$</span><span class="kw">new</span>(data1, mod1)</a>
<a class="sourceLine" id="cb13-5" title="5">fit1<span class="op">$</span><span class="kw">run</span>()</a>
<a class="sourceLine" id="cb13-6" title="6">res1 &lt;-<span class="st"> </span><span class="kw">PM_load</span>(<span class="dv">1</span>) <span class="co">#PM_load is an alias for PM_result$new()</span></a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#Run 2 - update Ke range</span></a>
<a class="sourceLine" id="cb13-9" title="9">mod2 &lt;-<span class="st"> </span>mod1<span class="op">$</span><span class="kw">update</span>(<span class="kw">list</span>(<span class="dt">pri =</span> <span class="kw">list</span>(<span class="dt">Ke =</span> <span class="kw">range</span>(<span class="fl">0.5</span>, <span class="dv">3</span>))))</a>
<a class="sourceLine" id="cb13-10" title="10">fit2 &lt;-<span class="st"> </span>PM_fit<span class="op">$</span><span class="kw">new</span>(data1, mod2)</a>
<a class="sourceLine" id="cb13-11" title="11">fit2<span class="op">$</span><span class="kw">run</span>()</a>
<a class="sourceLine" id="cb13-12" title="12"></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="co">#Run 3 - continue run 2</span></a>
<a class="sourceLine" id="cb13-14" title="14">fit2<span class="op">$</span><span class="kw">run</span>(<span class="dt">prior =</span> <span class="dv">2</span>)</a></code></pre></div>
<p>The great advantage of R6 over Legacy is that in R6, you no longer need to spend time copying files from prior run folders, modifying them, and ensuring that they are in the working directory. After the initial creation of the data and model objects, everything can be done in R from memory, although results are still saved to hard drive for later retrieval.</p>
<p><span class="legacy">Legacy</span></p>
<p>The general Pmetrics workflow in Legacy for IT2B and NPAG is shown in the
following diagram. The major differences compared to R6 are:</p>
<ul>
<li><em>Data and model</em> The data is always a .csv file, and the model is always a text file which must be edited to make changes. Both must be copied from a prior folder to the current working directory for every run.</li>
<li><em>Run.</em> Separate commands for NPAG and IT2B must be used, i.e. <code>NPrun()</code> and <code>ITrun()</code>.</li>
<li><em>Loading.</em> Results are loaded with <code>PMload()</code> not <code>PM_load()</code> because the former returns a collection of results all suffixed with the run number, e.g. <code>op.1</code> or <code>final.1</code> for run 1. This can lead to confusion if working on two projects at once, or uncertainty about what is actually loaded.</li>
</ul>
<p><img src="Images/Slide2.png" /></p>
<p>The user supplies the names of the data and model files as arguments to
the run functions. R is used to specify the working directory containing these files. The analysis is executed in a terminal window by calling <code>NPrun</code>, <code>ITrun</code> or <code>ERRrun</code> functions. The results can be loaded into R after the run completes using
<code>PMload</code>. The analgous Legacy code to the R6 code above is shown here.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co">#Run 1 - ensure the data, model files are in the working directory</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="kw">NPrun</span>(<span class="st">&quot;data.csv&quot;</span>, <span class="st">&quot;model.txt&quot;</span>)</a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">PMload</span>(<span class="dv">1</span>) </a>
<a class="sourceLine" id="cb14-4" title="4"></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="co">#Run 2 - update Ke range - edit file outside R, copy to working directory</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co">#use same data as for run 1</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="kw">NPrun</span>(<span class="dt">data =</span> <span class="dv">1</span>, <span class="st">&quot;model2.txt&quot;</span>)</a>
<a class="sourceLine" id="cb14-8" title="8"></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co">#Run 3 - continue run 2</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="kw">NPrun</span>(<span class="dt">data =</span> <span class="dv">1</span>, <span class="dt">model =</span> <span class="dv">1</span>, <span class="dt">prior =</span> <span class="dv">2</span>)</a></code></pre></div>
<p>While there are fewer lines of R code than for R6, the edits made to create model2.txt are not recorded anywhere in R, and must be made outside R, with cumbersome file copying to ensure everything is in the working directory.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="pmetrics-overview.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="pmetrics-input-files.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-Workflow.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
