<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Runs NPAG"><title>Execute an NPAG run. — NPrun • Pmetrics</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Execute an NPAG run. — NPrun"><meta property="og:description" content="Runs NPAG"><meta property="og:image" content="https://lapkb.github.io/Pmetrics/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Pmetrics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/pmetrics.html">Start Here</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro.html">Introduction</a>
    <a class="dropdown-item" href="../articles/overview.html">Overview</a>
    <a class="dropdown-item" href="../articles/workflow.html">Workflow</a>
    <a class="dropdown-item" href="../articles/data.html">Data Inputs</a>
    <a class="dropdown-item" href="../articles/models.html">Model Inputs</a>
    <a class="dropdown-item" href="../articles/simulation.html">Simulation</a>
    <a class="dropdown-item" href="../articles/plotly.html">Plotly plots</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Execute an NPAG run.</h1>
      
      <div class="d-none name"><code>NPrun.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Runs NPAG</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">NPrun</span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="st">"model.txt"</span>,</span>
<span>  data <span class="op">=</span> <span class="st">"data.csv"</span>,</span>
<span>  <span class="va">run</span>,</span>
<span>  <span class="va">include</span>,</span>
<span>  <span class="va">exclude</span>,</span>
<span>  ode <span class="op">=</span> <span class="op">-</span><span class="fl">4</span>,</span>
<span>  tol <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  <span class="va">salt</span>,</span>
<span>  cycles <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  <span class="va">indpts</span>,</span>
<span>  icen <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>  <span class="va">aucint</span>,</span>
<span>  idelta <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  <span class="va">prior</span>,</span>
<span>  auto <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  intern <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  nocheck <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  alq <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  remote <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  <span class="va">server_address</span>,</span>
<span>  report <span class="op">=</span> <span class="cn">T</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>model</dt>
<dd><p>Name of a suitable model file template in the working directory or
an existing (previous) run number corresponding to a folder in the current working directory that used the same model file as will be used in the current run.
If this is supplied, then the model file will be copied into the current
working directory for convenience.  If not supplied,
the default is “model.txt”.  This file will be converted to a fortran model file.
If it is detected to already be a fortran file, then the analysis will proceed without any further
file conversion.</p></dd>


<dt>data</dt>
<dd><p>Name of a suitable data file (see <code><a href="PMwriteMatrix.html">PMwriteMatrix</a></code>) or
an existing (previous) run number corresponding to a folder in the current working directory that used the same data file as will be used in the current run.
If this is supplied, then previously made  '.ZMQ' files will be copied into the current
working directory, bypassing the need to re-convert the .csv file and speeding up the run..</p></dd>


<dt>run</dt>
<dd><p>Specify the run number of the output folder.  Default if missing is the next available number.</p></dd>


<dt>include</dt>
<dd><p>Vector of subject id values in the data file to include in the analysis.  The default (missing) is all.</p></dd>


<dt>exclude</dt>
<dd><p>A vector of subject IDs to exclude in the analysis, e.g. c(4,6:14,16:20)</p></dd>


<dt>ode</dt>
<dd><p>Ordinary Differential Equation solver log tolerance or stiffness.  Default is -4, i.e. 0.0001.  Higher values will result in faster
runs, but parameter estimates may not be as accurate.</p></dd>


<dt>tol</dt>
<dd><p>Tolerance for convergence of NPAG.  Smaller numbers make it harder to converge.
Default value is 0.01.</p></dd>


<dt>salt</dt>
<dd><p>Vector of salt fractions for each drug in the data file, default is 1 for each drug.  This is not the same as bioavailability.</p></dd>


<dt>cycles</dt>
<dd><p>Number of cycles to run. Default is 100.</p></dd>


<dt>indpts</dt>
<dd><p>Index of starting grid point number.  Default is missing, which allows NPAG to choose depending on the number of random parameters:
1 or 2 = index of 1; 3 = 3; 4 = 4, 5 = 6,
6 or more is 10+number of multiples for each parameter greater than 5, e.g. 6 = 101; 7 = 102, up to 108 for 13 or more parameters.</p></dd>


<dt>icen</dt>
<dd><p>Summary of parameter distributions to be used to calculate predictions in HTML report.  Default is "median", but could be "mean".
Predictions based on both summaries will be available in objects loaded by <code>PMload</code>.</p></dd>


<dt>aucint</dt>
<dd><p>Maintained for backwards compatibility and not used currently. Interval for AUC calculations.  Default is 24 hours if the number of intervals is not greater than 48; otherwise it defaults
to the interval which allows for &lt;= 48 intervals.</p></dd>


<dt>idelta</dt>
<dd><p>Interval in 1/60 time unit, typically minutes, for predictions at times other than observations.  Default is 12.</p></dd>


<dt>prior</dt>
<dd><p>Name of a suitable NPAG output object from a prior run loaded with <code>PMload</code>,
i.e. the <em>NPdata</em> object.  A <code>prior</code> may be specified if the user wishes to
start from a non-uniform prior distribution for the NPAG run. The default value is -99,
which translates in NPAG to a uniform prior distribution.  An alternative is to include a DEN0001 file from the prior
NPAG run in the working directory of the new run, and specify this as the value for <code>prior</code>, e.g.
<code>prior = 'DEN0001'</code>.</p></dd>


<dt>auto</dt>
<dd><p>If <code>auto</code> is <code>False</code> you can answer all questions about the run environment manually.  This might
be helpful for beginners.  Default is <code>True</code>.</p></dd>


<dt>intern</dt>
<dd><p>MacOSX only: Run NPAG in the R console without a batch script.  Default is false.
This will be ignored if on Windows systems.  On the latter, the behavior of cmd.exe (aka the “DOS” window)
with R is poor - it does not update until the end of execution, so you cannot see any output that indicates that NPAG is running.
If <code>intern=T</code> the HTML summary page will not be automatically loaded at the end of the run, but all post-run processing will occur normally,
and you can find the HTML summary page in the /outputs folder: NPAGreport.html.</p></dd>


<dt>quiet</dt>
<dd><p>Boolean operator controlling whether a model summary report is given.  Default is <code>TRUE</code>.</p></dd>


<dt>overwrite</dt>
<dd><p>Overwrite existing run result folders.  Default is <code>FALSE</code>.</p></dd>


<dt>nocheck</dt>
<dd><p>Suppress the automatic checking of the data file with <code><a href="PMcheck.html">PMcheck</a></code>.  Default is <code>FALSE</code>.</p></dd>


<dt>parallel</dt>
<dd><p>Run NPAG in parallel.  Default is <code>NA</code>, which will be set to <code>TRUE</code> for models that use
differential equations, and <code>FALSE</code> for algebraic/explicit models.  The majority of the benefit for parallelization comes
in the first cycle, with a speed-up of approximately 80\<!-- % of the number of available cores on your machine, e.g. an 8-core machine -->
will speed up the first cycle by 0.8 * 8 = 6.4-fold.  Subsequent cycles approach about 50\<!-- %, e.g. 4-fold increase on an 8-core -->
machine.  Overall speed up for a run will therefore depend on the number of cycles run and the number of cores.</p></dd>


<dt>alq</dt>
<dd><p>For internal developer use only.  Should be set to <code>FALSE</code>.</p></dd>


<dt>remote</dt>
<dd><p>Default is <code>FALSE</code>.  Set to <code>TRUE</code> if loading results of an NPAG run on remote server.</p></dd>


<dt>server_address</dt>
<dd><p>If missing, will use the default server address returned by getPMoptions().
Pmetrics will prompt the user to set this address the first time the <code>remote</code> argument is set to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A successful NPAG run will result in creation of a new folder in the working
directory.  This folder will be named numerically and sequentially with respect to previous runs.
Within this folder will be four subfolders: etc, inputs, outputs, and wrkcopy, described below.</p><ul><li><p><b>etc</b>   Control files for NPAG generally not needed by the user after a completed run.</p></li>
<li><p><b>inputs</b>   This folder will contain the .csv data file and the model file.</p></li>
<li><p><b>outputs</b>   This folder will contain the output from the NPAG run.  These files will be
prefixed by DEN, ILOG, OUT, OUTT, PRTB and RFILE, with appended numbers, usually 0001.
DEN is the density file which can be used to specifiy a non-uniform prior parameter value
distribution for a subsequent NPAG run of the same model via the <code>prior</code> argument
above.  ILOG is a summary of cycle objective function values, gamma/lambda, and gridpoints.
OUT and OUTT are full and truncated textfiles containing all output of NPAG.  OUTT is missing
density file.  PRTB contains Bayesian posterior individual predictions for each subject and
output at timepoints specified in the NPAG instructions (e.g. every 2, 4, 8, 12 minutes) as well
as predictions at each observation time.  RFILE contains NPAG output formatted for easy import
into R, and is the file read by the <code><a href="NPparse.html">NPparse</a></code> command.  Finally, there will also
be an nplog.txt file containing additional run information.</p></li>
<li><p><b>wrkcopy</b>    The working copy format which is used by NPAG.  Invisibly to the user,
the .csv input file is converted to these text files, one file per subject.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>NPrun</code> will execute an NPAG run.</p>
<p>If all function arguments are default, the simplest execution of this command is
<code>NPrun()</code>.  This will result in generation of a batch file.  On Unix (Mac) systems
will be launched automatically in a terminal window.  On Windows systems, the user
must execute the batch file from the current working directory, which will launch NPAG
in a command prompt (DOS-like) window.  In either case, NPAG will run independently of R
so that R can be used for other purposes if desired.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="NPparse.html">NPparse</a></code>, <code><a href="ITrun.html">ITrun</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michael Neely</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Michael Neely, Julián Otálvaro.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

