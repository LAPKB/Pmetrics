\title{NEWS file for the Pmetrics package}
<h2 style='color:#222222'>Changes in version 1.5.3</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>MMopt now has multi-weighting option for any combo of auc, max, min</li>
<li>makeValid and plot.PMvalid added to replace makeNPDE and add pcVPC capacity</li>
<li>Updated makePTA to accept PMpost and PMmatrix objects</li>
<li>PMtree now checks for existing project and aborts if found to prevent overwriting.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed minor bug in npc to make calculated percentage between 5th and 95th percentile correct</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.5.2</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Updated for R version 3.5</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>None</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.5.1</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added the removal of lines with only spaces in model files that could cause an error</li>
<li>Clarified instruction line to launch batch file in Windows to execute NPAG/IT2B run.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bug in SIMrun when trying to used pre-loaded data file</li>
<li>Fixed bug with copying priors from previous run now that runs made inside new folders</li>
<li>makeAUC now returns NA when only one observation present for a subject</li>
<li>Models with more than 9 compartments detect compartments correctly</li>
<li>Restored split function to simulator, which was broken in 1.5.0</li>
<li>Recoded PMcompare to comply with deprecated recycling of vector length 1 in R, as of v. 3.4.3</li>
<li>Updated PMwrk2csv to properly handle files with 0 rates, i.e. only bolus dosing</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.5.0</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>NPAG can now use variables which are fixed in the population, but estimated</li>
<li>Added ability to use external dataset for NPDE</li>
<li>Added shrinkage calculation to final objects as final.x$shrinkage.  Also added this to the summary table in PMreport.</li>
<li>makeNCA has new terminal argument (default=3) to control number of concentrations used for fitting k to terminal portion of time-concentration curve.</li>
<li>Added weighting to MMopt.</li>
<li>Removed dependency on rJava for PMcheck</li>
<li>Added ability to simulate with both covariates and split.  The mean covariate value is added to each support point in this case.</li>
<li>makePTA with target.type = 'time' now MUCH faster thanks to improvements by Jan Strojil</li>
<li>Added the ability to makePTA to recalculate success threshold and redefine labels using existing PMpta object</li>
<li>SIMparse can now operate in parallel and will check if older simulations are present.</li>
<li>Updated Shiny code for PMcode(run) </li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>The mult argument works properly in plot.PMsim now.</li>
<li>Fixed bug in makePTA and simulated targets that miscalculated success</li>
<li>Fixed bug in makeNPDE that caused a crash when model and data files have same basename.</li>
<li>Corrected makeFinal postPoints when nsub>100.</li>
<li>Improved handling of missing subjects in makeNCA.</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.4.1</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added a check to PMcheck for subjects with no observations</li>
<li>Added binSize argument to plot.PMsim to bin simulated concentrations, which is useful for VPCs.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed plot, summary, and print PMop to handle objects with no observations</li>
<li>PMtest updated for parallelized version of Pmetrics</li>
<li>fixed SIMrun ID bug </li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.4.0</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>NPAG code parallelized over points introduced.  Default is serial for algebraic/exact and parallel for ODE models.  Can be overridden by user.</li>
<li>Post-run report now includes Processing mode (parallel | serial) and run time.</li>
<li>Added the ability to specify predInt argument to SIMrun as a list of multiple intervals to generate predictions.</li>
<li>When making a csv file from simulated output, missing obsNoise now defaults to model file values, not 0.</li>
<li>Added PMmb2csv to convert old .mb or USC*PACK files to .csv format</li>
<li>Added setPMoptions and getPMoptions for session options.  Currently they are sep (datafile field separator which can be "," or ";") and dec (decimal separator which can be "." or ",").  Removed PMreadDefaults and PMwriteDefaults as Defaults package no longer supported.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Bug with ADDL and II in NM2PM fixed</li>
<li>Allowed makeFinal to work with older NPdata objects that don't have postden items</li>
<li>Changed incorrectly formatted values <1E-100 to be 0 in output files</li>
<li>Fixed makeFinal and makePost to handle one subject data files properly</li>
<li>Fixed PMwrk2csv when no assay error coefficients present</li>
<li>General updating of help files, which isn't really a bug!</li>
<li>Fixed bug in simulator output when values very near 0 didn't format properly</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.3.2</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>None</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed makeFinal bug regarding posterior density</li>
<li>Scaled bivariate NPAG final plots properly</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.3.1</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added Bayesian posterior parameter points to final object as final$postden</li>
<li>Added a plot method to plot.PMfinal to plot posterior distributions for a given parameter and set of subjects.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>covariate argument now works properly for alphanumeric ID and when no covariates are fixed</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.3.0</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added summary.PMfinal to provide non-parametric parameter summaries based on simulation or parametric parameter summaries based on central limit theorem</li>
<li>Added col.pred argument to plot.PMmatrix to allow separate coloring of predicted profiles</li>
<li>Added makePTAtarget to simulate distributions of targets and updated makePTA, plot.PMpta, and summary.PMpta accordingly.</li>
<li>Added the ability to do PDI (pharmacodynamic index) plots with plot.PMpta.</li>
<li>NPAG, IT2B and simulator updated logic for SS dosing to have observation at time x be the concentration x hours after the beginning of the last steady state dose</li>
<li>Added another argument to the covariate SIMrun list argument: fix, which permits some covariates to be fixed to values in the template and not simulated</li>
<li>Re-parameterized limits argument to the covariate SIMrun list argument so that it is a named list with the desired limits for each covariate</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bug in model file syntax checking with compilers other than gfortran.</li>
<li>summary.PMcov now handles non-numeric IDs correctly.</li>
<li>makePTA now calculates AUC correctly when start!=0 - it was adding in a time=0, conc=0 row, regardless of whether start=0 or not</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.9</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added time after dose plotting option to plot.PMmatrix.</li>
<li>Added summary.PMmatrix and print.summary.PMmatrix</li>
<li>SIMrun now checks for covariance matrices that are not pos-def and offers several solutions</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bug in plot.PMmatrix where subjects with all missing observations caused an error.</li>
<li>add=T now functions properly in plot.PMsim when nsim<10.</li>
<li>Fixed error in makeNPDE causing problem with old instruction files.</li>
<li>Updated PMrun to work when data and model files have same root name</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.8</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>None yet</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>makeNPDE now works properly when the run to use was made with a non-uniform prior</li>
<li>SIMrun developed a bug after introducing covariate simulations such that fixed parameter values weren't handled properly.  This has been corrected.</li>
<li>PMcheck had a bug when TIME=0 observation requirement removed.  Fixed. </li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.7</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>PMcheck now makes a color-coded .xlsx file with highlighted errors.  This code was co-developed with Patrick Nolain in Limoges, France.</li>
<li>More widespread checking occurs for packages with automatic downloading/installation for those that are missing </li>
<li>makeNCA now takes a variety of arguments including a run number which can be used to do NCA on an data file or a post object, or a previously loaded data file, or a data file in the working directory</li>
<li>The post and pop objects after an NPAG run now contain the predictions at observation times in addition to the intervals specified by the idelta argument to NPrun</li>
<li>Model file format updated to TSMULTM</li>
<li>Removed PMcheck requirement for no observations at time=0.  Predictions will always be 0 unless non-zero initial conditions or steady-state dosing specified.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bug in covariate simulations when 0-variance covariates are not present</li>
<li>Corrected plot.PMmatrix to handle error bars on observations when C0,C1,C2,C3 missing from data file</li>
<li>Included gamma/lambda in SD for weighting in bias/imprecision - now matches option 6/7 results in old USC*PACK</li>
<li>PMstep now works properly with a datafile containing only one covariate</li>
<li>AIC calc changed in IT2B/NPAG from -TRULOG + (P + Q)  to   2*(-TRULOG + (P + Q)) </li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.6</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added covariate argument to SIMrun to enable simulation with covariates</li>
<li>Internal moving of parseBlocks function to independent function</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed small bug in makeNCA that caused an error in Tmax when there were two successive simulated Cmax that were the same by rounding.</li>
<li>Corrected formulae for weighted prediction error to weight by SD not variance</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.5</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>You can now plot any subset of output equations in plot.PMmatrix.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bugs related to making post and pop objects</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.4</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Just bug fixes from 1.2.3</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Numerous little bugs with make family and PMstep all related to adding mean and median predictions.</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.3</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Updated to reshape2</li>
<li>Enhanced algorithm for makePost and makePop to generate data frames with predictions based on means and medians</li>
<li>Updated makeAUC, makeNCA, plot.PMmatrix to include icen (mean or median) argument to use new output from makePost and makePop</li>
<li>Updated makeOP and makeCov to eliminate icen argument and make objects that include predictions based on means and medians</li>
<li>Updated plot.PMop to use icen and pred.type (post or pop) rather than type </li>
<li>Updated plot.PMcov to use icen</li>
<li>Added PMsave as complement to PMload</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bug where prior DENxxxx file was moved rather than copied from earlier run when using the prior=run notation in NPrun</li>
<li>makeCov now handles multiple input models properly</li>
<li>SIMparse and makePTA now handle missing values in simulated files</li>
<li>Fixed PMupdate by setting up package repository on LAPK website.</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.2</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added boolean option to suppress legend in makeErrorPoly</li>
<li>Added summary.PMcov to summarize covariates and Bayesian posterior parameter values for each subject</li>
<li>Added free.fraction argument to makePTA, as suggested by Joe Kuti</li>
<li>PMload can now load any number of results in a single command</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Corrected time above target calculations in makePTA to reflect proportion of stated time interval, i.e. end-start</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.1</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added MMopt function for MM-optimal design from NPAG output</li>
<li>Added silent data file check when using NPrun, ITrun, or SIMrun.</li>
<li>Added error trap if the number of lines of output error coefficients in the model file is not equal to the number of output equations.</li>
<li>Added RMSE and \%RMSE to summary.PMop and pop\%RMSE and post\%RMSE to PMcompare</li>
<li>Added checks for EVID and TIME values in all rows to PMcheck</li>
<li>Added check for non-numeric columns to PMcheck</li>
<li>Removed requirement to have all subjects end with an EVID=0 observation event</li>
<li>Reversed axes so that x is now predicted and y is observed to be consistent with mathematical notation obs = pred + error</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Corrected handling of multiple output equations by PMcompare</li>
<li>Fixed creation of .config folder as needed on Mac/Linux systems</li>
<li>Stabilized name of directory for calling post-run processing script which couldn't be found by some Windows users</li>
<li>Corrected bug in simulator when multiplying limits with fixed variables present</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.2.0</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Pmetrics now works with Linux!  This is in prep for server mode and parallelized code.</li>
<li>Added NONMEM to Pmetrics translator: NM2PM.  It has been tested on several NONMEM files, but will probably not handle every possibility yet.</li>
<li>Cleaned up NPrun, ITrun, ERRrun code to use common source which is a hidden function.  This makes these functions more stable for changes moving forward.</li>
<li>Examples updated.</li>
<li>Documentation for PMcheck updated.</li>
<li>By entering nsim=0, you can now simulate one profile from each point in a non-parametric prior. This is prep for including the MMopt optimal sampling algorithm into Pmetrics.</li>
<li>A prior for NPrun can now be specified by simply typing the run number in addition to the existing methods of NPdata.x or DEN0001 file.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>PMbuild will now correctly detect missing packages and install them.</li>
<li>Fixed logic in PMreport to better handle error conditions</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.1.7</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Redesigned report and consolidated NPreport and ITreport into single PMreport function</li>
<li>Added tex file report to output (code by Alona Kryschenko)</li>
<li>Changed default behavior of obsNoise argument in SIMrun.  Now, if missing, will default to 0 for all coefficients/output equations (i.e. no noise).  To use values in data file first, and if missing, the model file, specify obsNoise=NA.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed a bug in simulator related to parsing multiple output equations</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.1.6</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>None</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Corrected error in instructions causing a crash when fitting data with no covariates</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.1.5</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added a check in NPrun, ITrun, ERRrun and SIMrun to ensure that model and data file names are 8 characters or fewer</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed more simulator bugs relating to dataframe format with lots of observations that continued on separate lines</li>
<li>Updated help for makeAUC to include method argument (linear or other)</li>
<li>Corrected handling of exclude argument to NPrun, ITrun and ERRrun</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.1.4</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Change simulator argument to clean rather than cleanUp to be consistent with other functions</li>
<li>Simplified start messaging</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed simulator bug with limits related to new dataframe structure of simulator output</li>
<li>Corrected bug in makePTA when using a single target with new dataframe structure of simulator output</li>
<li>Fixed directory handling in Windows version of PMupdate.</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.1.3</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Updated NPAG and IT2B to run off single instruction file rather than control stream plus instruction file</li>
<li>Added p-values to PMcompare based on nearest neighbors analysis of joint density for similarity.  Also eliminated need for list of NPdata or ITdata objects.</li>
<li>Changed simulator output to a simpler dataframe structure</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed the detection of output equation numbers in model file building to account for conditional outputs</li>
<li>Set compartment amts from SIMparse to NA if a 0 compartment model (explicit output)</li>
<li>Fixed bug in PMcheck which did not properly detect a PMmatrix object supplied as the object to check.</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.1.2</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added exclude to list of arguments for SIMrun</li>
<li>Replaced PMdiag with makeNPDE which is a wrapper for npde::autonpde (Comets et al)</li>
<li>Added a fourth option to specify limits in SIMrun: a vector of 1 or 2 numbers to multiply the columns of the final$ab object used in the simulation.</li>
<li>Updated for Windows 8 and Mac OSX Mavericks</li>
<li>Internal changes to structure of PMsim objects from array to data.frame.  Also added compartment amounts to PMsim list obtained from SIMparse.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed a bug in PMupdate</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.1.1</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added ability to use wildcards with makePTA to parse Simulator files on the fly</li>
<li>Combined NPload and ITload into single PMload function</li>
<li>Added ability to include comment lines prefixed with 'C ' in model files</li>
<li>Added include and exclude to makeAUC function</li>
<li>Changed predInt argument to SIMrun to allow for start, stop, interval times.</li>
<li>Reworked SIMparse to allow for combining across simulations with different times, as well as to include or exclude files returned when using wildcards.</li>
<li>Added weighted.t.test to summary of PMop objects to test for bias different than 0.  Code for this is courtesy of FelixS (http://www.r-bloggers.com/weighted-t-test-in-r/), also inspired by a function from Gavin Simpson on R-Help</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed incorrect handling of salt fractions for multiple drugs.</li>
<li>When outeq is specified with plot.PMsim and obs is included (for VPC), correct observations via outeq are now selected</li>
<li>Fixed bug that crept into PMcompare with plot=T option</li>
<li>Updated PMtree to generate template script with PMload rather than NPload</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.1.0</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added ability to use old .ZMQ files to NPAG</li>
<li>Now extracts Bayesian posterior densities for first 100 subjects into NPdata</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed notification to run PMbuild()</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 1.0</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>NEW! Pmetrics gets a GUI via the Shiny package.  Use PMcode("command").</li>
<li>Moved the directory for compiled Pmetrics fortran code to the folder pointed to by Sys.getenv('APPDATA') on Windows systems</li>
<li>Added out argument to all Pmetrics plots enabling output to any graphic device, e.g. pdf, eps, tiff, jpeg, etc, making it easy to generate publication-ready plots.</li>
<li>Replaced PMcheckMatrix and PMcheckModel with PMcheck to check data files and (optionally) model files for errors.</li>
<li>PMcheck will now look for non-monotonically increasing times within a subject ID and subject IDs which have been reused, i.e. are non-contiguous.</li>
<li>The errbar argument is added to plot.PMatrix to plot standard deviation error bars around observations, based on C0, C1, C2, C3 in the data file or user-supplied values.</li>
<li>Exclude now added as argument to plot.PMmatrix, plot.PMop, and plot.PMcov to exclude subject IDs, i.e. the complement to the include argument.</li>
<li>PMfixMatrix deprecated and fix=F/T argument added to PMcheck</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed a bug that caused model files to parse incorrectly if headers included with no information. Now they are ignored.</li>
<li>Corrected handling of more than one fixed parameter when writing instruction files.</li>
<li>PMcheck (formerly PMcheckMatrix) now correctly reports subjects with first record != EVID 1 or TIME 0.</li>
<li>Minor housekeeping issues with some of the plot functions.</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.40</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>MAJOR update: the model file has been extended to eliminate the need for an instruction file by adding parameter ranges to PRI block and an ERRor block.</li>
<li>Added a new function to print errors in .csv files from PMcheckMatrix in a more easily digestible format.</li>
<li>Added a new function PMfixMatrix to attempt to automatically correct errors detected with PMcheckMatrix.</li>
<li>Added an 'extra' block to model file to allow for additional fortran subroutines to be added to the end of a model file</li>
<li>Changed makeOP and associated functions to always make OP objects for population and posterior predictions for all output equations, similar to the object loaded by NPload or ITload.  This combined object also has class PMop.  Functions can handle the larger object or the individual objects.</li>
<li>Reversed axes so that y is now predicted and x is observed to be consistent with mathematical notation that dependent variable is plotted on the y axis.</li>
<li>Redefined bias to be pred - obs, so that positive bias implies overprediction.</li>
<li>Changed output files to now be sequentially numbered rather than date-time stamped. This allows easier loading and examples.</li>
<li>Implemented system to compile Pmetrics objects upon first use, so that they do not have to be recompiled until there is a change in Fortran code.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bugs in SIMrun that mishandled multiple distributions manually specified and creation of .csv files </li>
<li>Corrected calculations for bias (mean weighted obs-pred) and imprecision (bias-adjusted mean weighted squared obs-pred)</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.30</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>BIG CHANGE:  Model file is now a much simpler text file which is parsed to make the fortran code.  Maintained backwards compatibility with existing fortran model files.</li>
<li>Added a growth dataset and qgrowth function to abstract CDC growth percentiles useful for simulating pediatric datasets.</li>
<li>Added bias and precision to observed vs. predicted regression plots</li>
<li>Clarified prediction errors on residual plots</li>
<li>Added bias and precision to PMcompare</li>
<li>Changed 'nsub' parameter to 'include' in SIMrun, so that non-contiguous subjects in a dataset may be used as simulation templates.  This is analogous to 'include' in plot.PMmatrix.</li>
<li>Added 'predInt' option to SIMrun to automatically generate simulated predictions for each template at the specified prediction interval, including predictions at times which are explicitly included in the template (i.e. EVID=0 events).</li>
<li>By default, makeCov now does not summarize covariate values, but returns all measured values and the time of measurement.  Bayesian posterior parameter values are replicated as necessary for each time/covariate entry.</li>
<li>plot.PMcov now accommodates the changes to makeCov above, so that when time is included as the x variable in a formula, one can plot changes in covariates or parameters over time, aggregated by subject.  Plotting two parameters or a parameter vs. covariate results in the customary behavior as before.</li>
<li>PMstep is also updated to handle the new PMcov format.</li>
<li>Added include argument to plot.PMcov, plot.PMop</li>
<li>Users must now specify a data file in NPrun, ITrun and ERRrun.  This enables more sophisticated error trapping. It also enables return of the data file as part of NPload or ITload.</li>
<li>Added checking for specified model, data, and (optional) instruction files and option to correct mistakes without aborting run.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bug in PMcheckMatrix when looking for missing covariate data in first entry for a patient</li>
<li>Fixed bug that caused crash when running population of 1 in NPAG</li>
<li>Fixed a bug in makeAUC for PMsim objects where the start parameter was ignored</li>
<li>Corrected plot.PMmatrix colors when single outeq > 1 plotted with prediction</li>
<li>Fixed another bug in plot.PMmatrix which did not handle block assignments correctly</li>
<li>Corrected subject IDs in PMcov objects</li>
<li>Corrected block (defined by EVID=4) handling in makeOP, makeAUC, makeNCA.   </li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.25</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>NPAG will no longer crash with a Hessian Matrix error, but will end 'nicely'</li>
<li>Changed 'denfile' argument in NPrun to 'prior' and enabled specification of either an NPdata object or a density file, e.g. DEN0001, for a non-uniform prior</li>
<li>Updated LAPK website with OS-specific instructions to download and install gfortran</li>
<li>Added intern=T option to NPrun, ITrun and ERRrun to run all three internally in R without a batch script.</li>
<li>Added PMstep function to carry out multiple linear regressions of covariates on Bayesian posterior parameters, with forward, backward, or forward/backward elimination of covariates</li>
<li>Users can now customize the defaults for any argument in any Pmetrics function using the setDefaults command from the Defaults package.  A new Pmetrics command, PMwriteDefaults, will make these session defaults permanent until undone by unsetDefaults.  See Defaults documentation for more details.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Corrected cycle numbering in plots when using a non-uniform prior for NPAG</li>
<li>Fixed bug in PMcheckMatrix if only one covariate</li>
<li>Corrected makeNCA to handle IV doses properly</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.24</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>PMtree() added to create basic folder substructure and skeleton R script for new Pmetrics project</li>
<li>PMupdate() added to update Pmetrics from within R without launching internet browser</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed a bug that crept into plot.PMsim which scrambled the simulated outputs</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.23</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Error checking to NPreport() and ITreport() allowing creation/saving of partial data in case of error</li>
<li>Added PMnews() to simplify retrieval of Pmetrics changelog</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bug in makePop with multiple outputs</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.22</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added makePop to generate predictions at frequent intervals for each subject using population parameter means, medians, or modes</li>
<li>Updated plot.PMmatrix, replacing "post" argument with "pred" to allow for either a post or pop object made by makePost or makePop, respectively</li>
<li>Added startup messages to inform users of news related to Pmetrics</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Enabled plot.PMsim to plot one simulated profile correctly.</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.21</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added a warning to PMcheckMatrix if event times will exceed the maximum number of AUC intervals (48) in NPAG, based on the default interval of 24 hours.</li>
<li>Updated PMwrk2csv to handle new format with ADDL and II columns.</li>
<li>Added progress bars to parsing at the end of an NPAG or IT2B run</li>
<li>SIMparse can now open and combine several simulator output files at once.</li>
<li>Pmetrics now automatically checks for necessary fortran components and offers to download and install if missing.</li>
<li>Added a new command PMmanual() to launch the User's Manual and function catalogue.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Made makePTA() stable to simulated values that are missing or not real numbers</li>
<li>Corrected plot.PMsim to handle circumstances better when zeros are encountered for log plots</li>
<li>Fixed some bugs in SIMrun related to manually specified population priors</li>
<li>Fixed a bug in PMwriteMatrix that used improper line endings in Windows, causing extra blank lines to be written</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.20</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Cleaned up bivariate plots in plot.PMfinal function.</li>
<li>Added target attainment function, summary and plot</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bug in simulator which caused it to crash when only one random variable simulated</li>
<li>Fixed minor bug in plot.PMcycle which did not allow full customization of gamma/lambda plot</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.19</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added ADDL and II items to data matrix to support additional and steady state dosing.  Old format matrix files without ADDL and II will be automatically updated.  This change is propagated through NPAG, IT2B and the Simulator</li>
<li>Added the ability to specify ranges to truncate simulator output and avoid extreme, i.e. non-phyisologic, parameters</li>
<li>Added progress bar to PMdiag and cleaned display for SIMrun</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed bug in PMmatrix plot that did not permit customization of X-axis label</li>
<li>Corrected a bug in makeErrorPoly that prevented reporting of 3rd degree polynomial coefficients</li>
<li>Fixed handling of .csv file creation during a simulation using SIMrun with multiple subjects as templates</li>
<li>Fixed bug in ERRrun that prevented completion on Windows machines</li>
<li>Corrected the PMcheckMatrix function to properly look for missing covariate data at time=0 for each subject</li>
<li>Suppressed confidence intervals in plot.PMsim if nsim <100 and enabled it to handle missing confidence intervals properly</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.18</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Cov objects are now loaded by default after NPAG and IT2B runs.</li>
<li>Added non-compartmental analysis to NPAG objects</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed matrix orientation of population means in simulator with multi-modal distributions</li>
<li>plot.PMcycle now works correctly if there are fewer than 10 cycles</li>
<li>Stopped makeErrorPoly from trying to open new graphics window</li>
<li>Updated makeErrorPoly to handle situations with too few points to fit 2nd and/or 3rd degree polynomials</li>
<li>Fixed errors in reading instruction files in ERRrun</li>
<li>Corrected mistake in IT2B runs with instruction files that caused end of file error</li>
<li>Took out AUC extraction with makeCov as it was too subject to error.  This function is better implemented in the existing makeAUC command.</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.17</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Pmetrics will now check for updates silently when it is first loaded into R with the library(Pmetrics) or require(Pmetrics) commands.  If an update is found, the user will be notified with a simple, unobtrusive message.</li>
<li>The scripts will now handle security features associated with Windows Vista and later which restrict installation of packages into certain folders.  Pmetrics now scans for the installation folder and sets this as an environment variable (which can be retrieved by Sys.getenv("PmetricsPath") for the remainder of the session.  This is invisible to the user.</li>
<li>32 and 64 bit versions are now included.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>None</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.16</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Changed to compiled IT2B, NPAG, and Simulator objects.  Initial roll out to support gfortran.  More compilers added as needed by users.</li>
<li>Added an include argument to plot.PMmatrix to only plot a subset of the population.  This can be used to match the same subset specified in an instruction file (which will be the only one modeled out of all subjects in the .csv file) or to simply focus on a subset of the total modeled population.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed improper handling of block calculation by plot.PMmatrix and NPpostPred</li>
<li>Fixed bug in ITrun script that tried to use the tee logging command in Windows, which does not exist</li>
<li>Fixed another bug in ITrun which did not write correctly formatted integer to extnum file for run numbering purposes</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.15</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added override flag to PMwriteMatrix to write .csv file even with errors.  Default is false.  This now allows a .csv file to be written by PMwrk2csv even if there are errors.  The errors will be reported, however.</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed improper handling of .csv files with comments by PMreadMatrix</li>
<li>Fixed improper handling of 0 cycle runs</li>
<li>Corrected path in Windows version to Rscript on some machines</li>
<li>Corrected logic in checking data files for missing covariate data at time 0 when there is only one covariate</li>
<li>Restored ability to control line characteristics in PMmatrix plot</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.14</h2>
<h3>BUG FIXES</h3>
<ul>
<li>Normalized .Library path to account for path truncation in Windows.</li>
<li>Fixed cycle plot of gamma from IT2B run to allow for one gamma for each output equation</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.13</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added npde, standardized visual predictive check with PMdiag command and object, which has a print method as well</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Corrected plotting of output equations >1 in PMmatrix objects</li>
<li>Changed .libpaths() to .Library in NPrun, ITrun, ERRrun, SIMrun to avoid multiple library paths</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.12</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Added additional items to ITparse and NPparse: tests for convergence, reporting of assay error model used, prior density used</li>
<li>Added support for different delimiters in PMreadMatrix</li>
<li>Added checking for column order and missing covariate data at time=0 to PMcheckMatrix</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Fixed a bug in plot.PMmatrix that suppressed posterior plots from simulated data</li>
<li>Made Rscript work in NPrun and ITrun even if R not in user environment</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.11</h2>
<h3>NEW FEATURES</h3>
<ul>
<li>Summary and print methods for PMop objects</li>
<li>Plotting summary of PMop as weighted residual vs. pred and vs. time</li>
<li>Greater control over grids in plots</li>
</ul>
</ul>
<h3>BUG FIXES</h3>
<ul>
<li>Formula parsing in plot PMfinal </li>
<li>Column name checking in PMcheckMatrix </li>
<li>Regenerating seed file for simulations before each subject</li>
<li>Fixed axis ticks in log plots</li>
</ul>
</ul>
</ul>
<h2 style='color:#222222'>Changes in version 0.10</h2>
<ul>
<li>So it begins.</li>
</ul>
</ul>
