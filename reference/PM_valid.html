<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Pmetrics validation object — PM_valid • Pmetrics</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Pmetrics validation object — PM_valid"><meta name="description" content="
Contains results of internal validation by simulation to permit generation of
visual predictive checks (VPCs), prediction corrected visual predictive checks,
(pcVPCs), normalized prediction distribution errors (NPDE), and
numerical predictive checks. This is typically a field in a PM_result"><meta property="og:description" content="
Contains results of internal validation by simulation to permit generation of
visual predictive checks (VPCs), prediction corrected visual predictive checks,
(pcVPCs), normalized prediction distribution errors (NPDE), and
numerical predictive checks. This is typically a field in a PM_result"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Pmetrics</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pmetrics.html">Start Here</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/intro.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/data.html">Data Objects</a></li>
    <li><a class="dropdown-item" href="../articles/models.html">Model Objects</a></li>
    <li><a class="dropdown-item" href="../articles/running.html">Running the fit</a></li>
    <li><a class="dropdown-item" href="../articles/objects.html">Created Objects</a></li>
    <li><a class="dropdown-item" href="../articles/simulation.html">Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/pta.html">Probability of Target Attainment</a></li>
    <li><a class="dropdown-item" href="../articles/plotly.html">Plotly plots</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/LAPKB/Pmetrics_rust/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Pmetrics validation object</h1>
      <small class="dont-index">Source: <a href="https://github.com/LAPKB/Pmetrics_rust/blob/main/R/PM_valid.R" class="external-link"><code>R/PM_valid.R</code></a></small>
      <div class="d-none name"><code>PM_valid.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>Contains results of internal validation by simulation to permit generation of
visual predictive checks (VPCs), prediction corrected visual predictive checks,
(pcVPCs), normalized prediction distribution errors (NPDE), and
numerical predictive checks. This is typically a field in a <a href="PM_result.html">PM_result</a></p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The PM_valid object is both a data field within a <a href="PM_result.html">PM_result</a>, and itself an R6 object
comprising data fields and associated methods suitable for analysis and plotting of
observed vs. population or individual predicted outputs.</p>
<p>Because PM_valid objects are automatically added to the <a href="PM_result.html">PM_result</a> by calling the
<code>$validate()</code> method of a <a href="PM_result.html">PM_result</a> after a
successful run, it is generally not necessary for users to generate PM_valid objects
themselves.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="PM_result.html">PM_result</a></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michael Neely</p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>simdata</code></dt>
<dd><p>Simulated data created in the validation process</p></dd>


<dt><code>timeBinMedian</code></dt>
<dd><p>Median times for cluster bins</p></dd>


<dt><code>tadBinMedian</code></dt>
<dd><p>Median times after previous doses for cluster bins</p></dd>


<dt><code>opDF</code></dt>
<dd><p>Observed-predicted data frame</p></dd>


<dt><code>npde</code></dt>
<dd><p>Data for Normalized Prediction Distribution Error</p></dd>


<dt><code>npde_tad</code></dt>
<dd><p>Data for Normalized Prediction Distribution Error
using Time After Dose if available</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-PM_valid-new"><code>PM_valid$new()</code></a></p></li>
<li><p><a href="#method-PM_valid-plot"><code>PM_valid$plot()</code></a></p></li>
<li><p><a href="#method-PM_valid-clone"><code>PM_valid$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-PM_valid-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>This function will create an object suitable for plotting visual predictive
checks (VPCs) and prediction-corrected visual
predictive checks (pcVPCs).</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/PM_valid.html">PM_valid</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">result</span>, tad <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">binCov</span>, <span class="va">doseC</span>, <span class="va">timeC</span>, <span class="va">tadC</span>, <span class="va">limits</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>result</code></dt>
<dd><p>The result of a prior run, usually supplied by calling the
<code>$validate()</code> method of a <a href="PM_result.html">PM_result</a> at the end of a run, or later loaded with <a href="PM_load.html">PM_load</a>.</p></dd>


<dt><code>tad</code></dt>
<dd><p>Boolean operator to use time after dose rather than time after start.  Default is <code>FALSE</code>.</p></dd>


<dt><code>binCov</code></dt>
<dd><p>A character vector of the names of covariates which are included in the model, i.e. in the
model equations and which need to be binned.  For example <code>binCov='wt'</code> if "wt" is included in a
model equation like V=V0*wt, or <code>binCov=c( 'wt', 'crcl')</code> if both "wt" and "crcl"
are included in model equations.</p></dd>


<dt><code>doseC</code></dt>
<dd><p>An integer with the number of dose/covariate bins to cluster, if known from a previous run of
this function.  Including this value will skip the clustering portion for doses/covariates.</p></dd>


<dt><code>timeC</code></dt>
<dd><p>An integer with the number of observation time bins to cluster, if known from a previous run of
this function.  Including this value will skip the clustering portion for observation times.</p></dd>


<dt><code>tadC</code></dt>
<dd><p>An integer with the number of time after dose bins to cluster, if known from a previous run of
this function.  Including this value will skip the clustering portion for time after dose. This argument
will be ignored if <code>tad=FALSE</code>.</p></dd>


<dt><code>limits</code></dt>
<dd><p>Limits on simulated parameters. See <a href="PM_sim.html">PM_sim</a>.</p></dd>


<dt><code>...</code></dt>
<dd><p>Other parameters to be passed to <a href="PM_sim.html">PM_sim</a>, especially <code>limits</code>.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-1">Details<a class="anchor" aria-label="anchor" href="#details-1"></a></h4>
<p>The function will guide the user
through appropriate clustering of doses, covariates and sample times for
prediction correction using the methods of Bergstrand et al (2011).
<em>NOTE:</em> Including <code>tad</code> is only
valid if steady state conditions exist for each patient.
This means that dosing is stable and regular
for each patient, without changes in amount or timing, and that
sampling occurs after the average concentrations
are the same from dose to dose.  Otherwise observations are <em>NOT</em>
superimposable and <code>tad</code> should
<em>NOT</em> be used, i.e. should be set to <code>FALSE</code>.</p>
</div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>An R6 object  of class <code>PM_valid</code>, which is a list with the following.</p><ul><li><p>simdata The combined, simulated files for all subjects using the population mean values and each subject
as a template. This object will be automatically saved to the run, to be loaded with
<a href="PM_load.html">PM_load</a> next time.</p></li>
<li><p>timeBinMedian A data frame with the median times for each cluster bin.</p></li>
<li><p>tadBinMedian A data frame with the median time after dose (tad) for each cluster bin.
This will be <code>NA</code> if <code>tad = FALSE</code>.</p></li>
<li><p>opDF A data frame with observations, predicitons, and bin-corrected predictions for each subject.</p></li>
<li><p>ndpe An object with results of normalized distrubition of prediction errors analysis.</p></li>
<li><p>npde_tad NPDE with time after dose rather than absolute time, if <code>tad = TRUE</code></p></li>
</ul></div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
valid &lt;- NPex$validate(limits = c(0, 3))
}

</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-PM_valid-plot"></a><div class="section">
<h3 id="method-plot-">Method <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code><a class="anchor" aria-label="anchor" href="#method-plot-"></a></h3>
<p>Plot method. Calls <a href="plot.PM_valid.html">plot.PM_valid</a>.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PM_valid</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>Arguments to pass to [plot.PM_valid].</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PM_valid-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PM_valid</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `PM_valid$new`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">valid</span> <span class="op">&lt;-</span> <span class="va">NPex</span><span class="op">$</span><span class="fu">validate</span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Neely, Julián Otálvaro, Markus Hößvd.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.9000.</p>
</div>

    </footer></div>





  </body></html>

