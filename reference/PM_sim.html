<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="If the $save method has previously been invoked on a PM_sim
object, this function will load those results.
Provides an alternative method to call the simulator directly from output
of a model fitting run."><title>Object to contain results of simulation — PM_sim • Pmetrics</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Object to contain results of simulation — PM_sim"><meta property="og:description" content="If the $save method has previously been invoked on a PM_sim
object, this function will load those results.
Provides an alternative method to call the simulator directly from output
of a model fitting run."><meta property="og:image" content="https://lapkb.github.io/Pmetrics/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Pmetrics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/pmetrics.html">Start Here</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro.html">Introduction</a>
    <a class="dropdown-item" href="../articles/overview.html">Overview</a>
    <a class="dropdown-item" href="../articles/workflow.html">Workflow</a>
    <a class="dropdown-item" href="../articles/data.html">Data Objects</a>
    <a class="dropdown-item" href="../articles/models.html">Model Objects</a>
    <a class="dropdown-item" href="../articles/running.html">Running the fit</a>
    <a class="dropdown-item" href="../articles/objects.html">Created Objects</a>
    <a class="dropdown-item" href="../articles/simulation.html">Simulation</a>
    <a class="dropdown-item" href="../articles/plotly.html">Plotly plots</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/LAPKB/Pmetrics/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Object to contain results of simulation</h1>
      <small class="dont-index">Source: <a href="https://github.com/LAPKB/Pmetrics/blob/HEAD/R/PM_sim.R" class="external-link"><code>R/PM_sim.R</code></a></small>
      <div class="d-none name"><code>PM_sim.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>If the <code>$save</code> method has previously been invoked on a PM_sim
object, this function will load those results.</p>
<p>Provides an alternative method to call the simulator directly from output
of a model fitting run.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="va">PM_sim</span><span class="op">$</span><span class="va">run</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>file_name</dt>
<dd><p>The name of the .rds file to load.</p></dd>


<dt>poppar</dt>
<dd><p>A population parameter result, which is a PM_final object. This
can be found in <code>PM_result$final$data</code>.</p></dd>


<dt>...</dt>
<dd><p>Additional parameters to be passed to <a href="SIMrun.html">SIMrun</a> and optionally,
"combine = T" as an argument will be passed to <a href="SIMparse.html">SIMparse</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A PM_sim object</p>


<p>A <code>PM_sim</code> object created by calling <a href="SIMparse.html">SIMparse</a> at the completion of the
simulation.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This object is created after a successful run of the simulator.</p>
<p>There are two methods of creating a PM_sim object.</p><ul><li><p>PM_result$sim</p></li>
<li><p>PM_sim$run</p></li>
</ul><p>These both call <a href="SIMrun.html">SIMrun</a> to execute the simulation and <a href="SIMparse.html">SIMparse</a> to process
the results and return the PM_sim objects. See help on both of these functions
for further details.</p>
<p>See <a href="makeAUC.html">makeAUC</a></p>
<p>The saved object is an .rds file. When loaded, it should be assigned to an R
object, e.g. <code>sim1 &lt;- PM_sim$load("filename")</code>.</p>
<p>Calling this function is equivalent to <code>PM_result$sim()</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>obs</code></dt>
<dd><p>Observations</p></dd>


<dt><code>amt</code></dt>
<dd><p>Amounts</p></dd>


<dt><code>parValues</code></dt>
<dd><p>Retained simulated parameter values after discarding
any due to truncation limits</p></dd>


<dt><code>totalSets</code></dt>
<dd><p>Number of all simulated parameter values</p></dd>


<dt><code>totalMeans</code></dt>
<dd><p>Mean of all simulated parameter values</p></dd>


<dt><code>totalCov</code></dt>
<dd><p>Covariance of all simulated parameter values</p></dd>


<dt><code>data</code></dt>
<dd><p>A matrix that contains all the above elements as columns</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-PM_sim-new"><code>PM_sim$new()</code></a></p></li>
<li><p><a href="#method-PM_sim-save"><code>PM_sim$save()</code></a></p></li>
<li><p><a href="#method-PM_sim-plot"><code>PM_sim$plot()</code></a></p></li>
<li><p><a href="#method-PM_sim-pta"><code>PM_sim$pta()</code></a></p></li>
<li><p><a href="#method-PM_sim-auc"><code>PM_sim$auc()</code></a></p></li>
<li><p><a href="#method-PM_sim-clone"><code>PM_sim$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-PM_sim-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create new simulation objects with results of <code>$sim</code>
method for <a href="PM_result.html">PM_result</a></p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/PM_sim.html">PM_sim</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">list</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>list</code></dt>
<dd><p>List of output passed by <code>$sim</code>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PM_sim-save"></a><div class="section">
<h3 id="method-save-">Method <code><a href="https://rdrr.io/r/base/save.html" class="external-link">save()</a></code><a class="anchor" aria-label="anchor" href="#method-save-"></a></h3>
<p>Save the current PM_sim object into a .rds file.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PM_sim</span><span class="op">$</span><span class="fu">save</span><span class="op">(</span>file_name <span class="op">=</span> <span class="st">"PMsim.rds"</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>file_name</code></dt>
<dd><p>Name of the file to be created, the default is PMsim.rds</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PM_sim-plot"></a><div class="section">
<h3 id="method-plot-">Method <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code><a class="anchor" aria-label="anchor" href="#method-plot-"></a></h3>
<p>Plot <code>PM_sim</code> object.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PM_sim</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>Arguments passed to <a href="plot.PMsim.html">plot.PMsim</a>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PM_sim-pta"></a><div class="section">
<h3 id="method-pta-">Method <code>pta()</code><a class="anchor" aria-label="anchor" href="#method-pta-"></a></h3>
<p>Estimates the Probability of Target Attaintment (PTA), based on the results
of the current Simulation.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PM_sim</span><span class="op">$</span><span class="fu">pta</span><span class="op">(</span><span class="va">targets</span>, <span class="va">target.type</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>targets</code></dt>
<dd><p>A vector of pharmacodynamic targets, such as
Minimum Inhibitory Concentrations (MICs), e.g. c(0.25, 0.5,1,2,4,8,16,32).
This can also be a sampled distribution using  <a href="makePTAtarget.html">makePTAtarget</a>.</p></dd>


<dt><code>target.type</code></dt>
<dd><p>A numeric or character vector, length 1.  If numeric,
must correspond to an observation time common to all PMsim objects in
<code>simdata</code>, rounded to the nearest hour.  In this case, the target
statistic will be the ratio of observation at time <code>target.type</code>
to target.  This enables
testing of a specific timed concentration (e.g. one hour after a dose
or C1) which may be called a peak, but is not actually the maximum drug
concentration.  Be sure that the time in the simulated data is used,
e.g. 122 after a dose given at 120.  Character values may be one of
"time", "auc", "peak", or "min", for,
respectively, percent time above target within the time range
specified by <code>start</code> and <code>end</code>, ratio of area under the curve
within the time range to target, ratio of peak concentration within the time range
to target, or ratio of minimum concentration within the time range to target.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional parameters, refer to <a href="makePTA.html">makePTA</a></p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PM_sim-auc"></a><div class="section">
<h3 id="method-auc-">Method <code>auc()</code><a class="anchor" aria-label="anchor" href="#method-auc-"></a></h3>
<p>Calculate AUC</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PM_sim</span><span class="op">$</span><span class="fu">auc</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>Arguments passed to <a href="makeAUC.html">makeAUC</a></p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PM_sim-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PM_sim</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Michael Neely, Julián Otálvaro.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

