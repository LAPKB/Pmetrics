<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
Calculates the Percent Target Attainment (PTA)"><title>Calculation of PTAs — makePTA • Pmetrics</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Calculation of PTAs — makePTA"><meta property="og:description" content="
Calculates the Percent Target Attainment (PTA)"><meta property="og:image" content="https://lapkb.github.io/Pmetrics/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Pmetrics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/pmetrics.html">Start Here</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro.html">Introduction</a>
    <a class="dropdown-item" href="../articles/overview.html">Overview</a>
    <a class="dropdown-item" href="../articles/workflow.html">Workflow</a>
    <a class="dropdown-item" href="../articles/data.html">Data Objects</a>
    <a class="dropdown-item" href="../articles/models.html">Model Objects</a>
    <a class="dropdown-item" href="../articles/running.html">Running the fit</a>
    <a class="dropdown-item" href="../articles/objects.html">Created Objects</a>
    <a class="dropdown-item" href="../articles/simulation.html">Simulation</a>
    <a class="dropdown-item" href="../articles/plotly.html">Plotly plots</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/LAPKB/Pmetrics/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculation of PTAs</h1>
      <small class="dont-index">Source: <a href="https://github.com/LAPKB/Pmetrics/blob/HEAD/R/makePTA.R" class="external-link"><code>R/makePTA.R</code></a></small>
      <div class="d-none name"><code>makePTA.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>Calculates the Percent Target Attainment (PTA)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">makePTA</span><span class="op">(</span></span>
<span>  <span class="va">simdata</span>,</span>
<span>  <span class="va">simlabels</span>,</span>
<span>  <span class="va">targets</span>,</span>
<span>  <span class="va">target.type</span>,</span>
<span>  <span class="va">success</span>,</span>
<span>  outeq <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  free.fraction <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">start</span>,</span>
<span>  <span class="va">end</span>,</span>
<span>  icen <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>  block <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>simdata</dt>
<dd><p>Can be one of multiple inputs.  Typically it is a vector of simulator output filenames, e.g. c("simout1.txt","simout2.txt"),
with wildcard support, e.g. "simout*" or "simout?", or
a list of PMsim objects made by <code>simdata</code> with suitable simulated regimens and observations.  The number and times of simulated
observations does not have to be the same in all objects.  It can also be a <em>PMpta</em> object previously made with
<code>makePTA</code> can be passed for recalculation with a new success value or simlabels.  Finally, <em>PMpost</em> and <em>PMmatrix</em> objects are
also allowed.</p></dd>


<dt>simlabels</dt>
<dd><p>Optional character vector of labels for each simulation.  Default is <code>c('Regimen 1', 'Regimen 2',...)</code>.</p></dd>


<dt>targets</dt>
<dd><p>A vector of pharmacodynamic targets, such as Minimum Inhibitory Concentrations (MICs), e.g. <code>c(0.25, 0.5,1,2,4,8,16,32)</code>.
This can also be a sampled distribution using  <a href="makePTAtarget.html">makePTAtarget</a>.</p></dd>


<dt>target.type</dt>
<dd><p>A numeric or character vector, length 1.  If numeric, must correspond to an observation time common to all PMsim objects in
<code>simdata</code>, rounded to the nearest hour.  In this case, the target statistic will be the ratio of observation at time <code>target.type</code> to target.  This enables
testing of a specific timed concentration (e.g. one hour after a dose or C1) which may be called a peak, but is not actually the maximum drug
concentration.  Be sure that the time in the simulated data is used, e.g. 122 after a dose given at 120.  Character values may be one of
"time", "auc", "peak", or "min", for, respectively, percent time above target within the time range
specified by <code>start</code> and <code>end</code>, ratio of area under the curve within the time range to target, ratio of peak concentration within the time range
to target, or ratio of minimum concentration within the time range to target.</p></dd>


<dt>success</dt>
<dd><p>A single value specifying the success statistic, e.g. 0.4 for proportion time (end-start) above target, or 100 for peak:target.</p></dd>


<dt>outeq</dt>
<dd><p>An integer specifying the number of the simulated output equation to use. Default is 1.</p></dd>


<dt>free.fraction</dt>
<dd><p>Proportion of free, active drug.  Default is 1, i.e. 100% free drug or 0% protein binding.</p></dd>


<dt>start</dt>
<dd><p>Specify the time to begin PTA calculations. Default is a vector with the first observation time for subjects
in each element of <code>simdata</code>, e.g. dose regimen. If specified as a vector, values will be recycled as necessary.</p></dd>


<dt>end</dt>
<dd><p>Specify the time to end PTA calculations so that PTA is calculated
from <code>start</code> to <code>end</code>.  Default for end is the maximum observation
time for subjects in each element of <code>simdata</code>, e.g. dose regimen.  If specified as a vector, values will be recycled
as necessary. Subjects with insufficient data (fewer than 5 simulated observations) for a specified interval will trigger a warning.
Ideally then, the simulated datset should contain sufficient observations within the interval specified by <code>start</code> and <code>end</code>.</p></dd>


<dt>icen</dt>
<dd><p>Can be either "median" for the predictions based on medians of <code>pred.type</code> parameter value
distributions, or "mean".  Default is "median".</p></dd>


<dt>block</dt>
<dd><p>Which block to plot, where a new block is defined by dose resets (evid=4); default is 1.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The output of <code>makePTA</code> is a list of class <em>PMpta</em>,
which has 2 objects:</p><ul><li><p><strong>results</strong> A data frame with the following columns: simnum, id, target, pdi.</p><ul><li><p><em>simnum</em> is the number of the simulation; <em>id</em> is the simulated profile number
within each simulation;</p></li>
<li><p><em>target</em> is the specified target;</p></li>
<li><p><em>pdi</em> is the target pharmacodynamic index, e.g. time &gt; target, auc:target, etc.</p></li>
</ul></li>
<li><p><strong>outcome</strong> A data frame summarizing the results with the following columns:
simnum, target, prop.success, pdi.mean, and pdi.sd.
If <code>targets</code> was specified via <a href="makePTAtarget.html">makePTAtarget</a> to be a sampled distribution, then
the target column will be missing from the outcome table.</p><ul><li><p><em>simnum</em> and <em>target</em> are as for <code>results</code>.</p></li>
<li><p><em>prop.success</em> is the proportion with a pdi &gt; <code>success</code>, as specified in</p></li>
<li><p><em>pdi.mean</em> and <em>pdi.sd</em> have the mean and standard deviation of the target pharmacodynamic index
(e.g. proportion end-start above target, ratio of Cmax to target) for each simulation and target.</p></li>
</ul></li>
</ul><p>There are several attributes for this object that reflect the conditions used
to create it. Access the values of these attributes with <code>attr(x, which)</code></p>


<p>as detailed in <code><a href="https://rdrr.io/r/base/attr.html" class="external-link">base::attr()</a></code>.</p><ul><li><p><em>simlabels</em> Values for the <code>simlabels</code></p></li>
<li><p><em>simTarg</em> Values for the <code>targets</code></p></li>
<li><p><em>success</em> Value for <code>success</code> threshold</p></li>
<li><p><em>type</em> Value for <code>target.type</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>makePTA</code> will calculate the PTA for any number of simulations, targets and definitions of success.
Simulations typically differ by dose, but may differ by other features such as children vs. adults. This function will also
accept data from real subjects either in the form of a <em>PMpost</em> or a <em>PMmatrix</em> object.
If a <em>PMpta</em> object is passed to the function as the <code>simdata</code>, the only other parameter required is success.
If desired, a new set of simlabels can be specified; all other parameters will be ignored.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="plot.PM_pta.html">plot.PM_pta</a>, <a href="PM_sim.html">PM_sim</a></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michael Neely and Jan Strojil</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">pta1</span> <span class="op">&lt;-</span> <span class="va">simEx</span><span class="op">$</span><span class="fu">pta</span><span class="op">(</span></span></span>
<span class="r-in"><span><span class="va">simlabels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"600 mg daily"</span>, <span class="st">"1200 mg daily"</span>, <span class="st">"300 mg bid"</span>, <span class="st">"600 mg bid"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">8</span>, <span class="fl">16</span>, <span class="fl">32</span><span class="op">)</span>, target.type <span class="op">=</span> <span class="st">"time"</span>,</span></span>
<span class="r-in"><span>success <span class="op">=</span> <span class="fl">0.6</span>, start <span class="op">=</span> <span class="fl">120</span>, end <span class="op">=</span> <span class="fl">144</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pta1</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pta1</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Michael Neely, Julián Otálvaro.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

